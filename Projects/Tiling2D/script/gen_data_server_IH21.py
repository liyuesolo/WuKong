import os
import matplotlib.pyplot as plt
from joblib import Parallel, delayed, parallel_backend
def process(i, data):
    IH = 19
    params = data[i]
    # result_folder = "/home/DockerMountFolder/SandwichStructure/TrainingData/" + str(i) + "/"
    # exe_file = "/home/DockerMountFolder/WuKong/build/Projects/Tiling2D/Tiling2D"
    exe_file = "/home/yueli/Documents/ETH/WuKong/build/Projects/Tiling2D/Tiling2D"
    result_folder = "/home/yueli/Documents/ETH/SandwichStructure/ServerIH21PD/" + str(i) + "/"
    if not os.path.isdir(result_folder):
        os.mkdir(result_folder)
    os.environ['OMP_THREAD_LIMIT'] = '1'
    # if os.path.exists(result_folder + "structure.vtk"):
    os.system(exe_file+" "+str(IH)+" " + result_folder + " 2 " + str(params[0]) + " " + str(params[1]) + " 0")
    


param_list = [ [0.0521421536813, 0.897624927944], 
[0.0539751459863, 0.500683747791], 
[0.188184399059, 0.705153079613], 
[0.299110401375, 0.501901377925], 
[0.281024279017, 0.899647204578], 
[0.206017395042, 0.360036363853], 
[0.050365197193, 0.648963264725], 
[0.0719524185043, 0.303954823038], 
[0.296898056472, 0.646803747838], 
[0.153680210935, 0.469377160896], 
[0.132758254061, 0.834943004667], 
[0.0722158877981, 0.746839294884], 
[0.210135431057, 0.548680145037], 
[0.297642391127, 0.740729196761], 
[0.28184166289, 0.30478806887], 
[0.11103715315, 0.38170230588], 
[0.265479280667, 0.422128929813], 
[0.206368351149, 0.866885394122], 
[0.144144787334, 0.30976679279], 
[0.184592396852, 0.774959220772], 
[0.090914193979, 0.557828163662], 
[0.190970822257, 0.613918882661], 
[0.0522192634652, 0.812265593797], 
[0.105011852088, 0.689235902479], 
[0.29897797103, 0.367964240288], 
[0.258138665863, 0.787798123848], 
[0.246710340072, 0.694524054134], 
[0.212231403246, 0.451968293615], 
[0.251000311738, 0.608220040942], 
[0.0535377454495, 0.377061281575], 
[0.147947883698, 0.556799699113], 
[0.053931127374, 0.444152083688], 
[0.201409245283, 0.30231719222], 
[0.106702858678, 0.789176143095], 
[0.298942315927, 0.853547427782], 
[0.168910357411, 0.898592902812], 
[0.123010280995, 0.599885859014], 
[0.232923420068, 0.746657579414], 
[0.214326009883, 0.815205795558], 
[0.270183697399, 0.537592757138], 
[0.165619670537, 0.665314095265], 
[0.125244667044, 0.729189542043], 
[0.299214440235, 0.692850684278], 
[0.0576757739334, 0.607003814497], 
[0.103994268437, 0.423419213166], 
[0.0950340857706, 0.515548006173], 
[0.297243053279, 0.813030728844], 
[0.0522683588333, 0.854215357897], 
[0.23907929535, 0.382270803713], 
[0.257300273332, 0.498202277812], 
[0.148938614758, 0.516986247719], 
[0.0945784807878, 0.336093406024], 
[0.242311744761, 0.898304838873], 
[0.135221673285, 0.879445741968], 
[0.0525232768396, 0.566523885572], 
[0.204826977828, 0.668076556254], 
[0.297087654307, 0.608714915211], 
[0.0855296435466, 0.476760780521], 
[0.205541652653, 0.414616601036], 
[0.272315623412, 0.458805876113], 
[0.159640449453, 0.81035186756], 
[0.270648937379, 0.576891855], 
[0.180225426345, 0.498431609198], 
[0.299726463226, 0.404691503432], 
[0.263102791092, 0.660457586758], 
[0.0685402424627, 0.679843316125], 
[0.162465485168, 0.730336038596], 
[0.156267904214, 0.631423845669], 
[0.135313888074, 0.770490752752], 
[0.299414981925, 0.777079024481], 
[0.148408072767, 0.34331661083], 
[0.120011776439, 0.488337880554], 
[0.0823703063337, 0.882425816721], 
[0.226336853847, 0.332662482947], 
[0.266165073899, 0.86499430042], 
[0.224462055752, 0.487170283397], 
[0.112098756927, 0.63161505113], 
[0.211886924138, 0.587321473606], 
[0.170206517689, 0.863672351634], 
[0.183587918889, 0.389213800658], 
[0.175736753864, 0.574294135568], 
[0.298934184783, 0.554377030979], 
[0.132194260825, 0.438856771374], 
[0.106764365433, 0.855636089647], 
[0.0530753153856, 0.780424665045], 
[0.23529175347, 0.849989133305], 
[0.0510728474013, 0.409985891781], 
[0.233329542369, 0.521967355731], 
[0.100426402036, 0.821553989743], 
[0.295650582945, 0.336573493498], 
[0.134606500265, 0.402830972664], 
[0.180936336066, 0.448193842987], 
[0.234225202275, 0.30132553177], 
[0.238873570268, 0.563777304098], 
[0.0892847957738, 0.602076590947], 
[0.299148990726, 0.43616434845], 
[0.0646808108616, 0.344556257988], 
[0.0938874757587, 0.719842866165], 
[0.228558247829, 0.77980679417], 
[0.0942432413317, 0.659718604926], 
[0.0526542805148, 0.536369058507], 
[0.2125556049, 0.724197155342], 
[0.0783786080677, 0.393412327251], 
[0.11712000273, 0.534892882982], 
[0.23510961029, 0.421327664573], 
[0.269245877918, 0.747997342259], 
[0.173658532334, 0.315384888842], 
[0.132493445525, 0.652036423307], 
[0.276164586365, 0.387038983725], 
[0.110027491795, 0.45733082516], 
[0.0662201129208, 0.709139691297], 
[0.249675339484, 0.35656239691], 
[0.242552979776, 0.823161984944], 
[0.236468263476, 0.656047955228], 
[0.100035425019, 0.747837780159], 
[0.170153789232, 0.365826178559], 
[0.297161454985, 0.469152264096], 
[0.119473085142, 0.320628187815], 
[0.274006461084, 0.701855360345], 
[0.276362949459, 0.839415785176], 
[0.154705432828, 0.418429017495], 
[0.180244525909, 0.341068159435], 
[0.0508204932096, 0.729929061993], 
[0.189370364318, 0.648156782588], 
[0.217471970044, 0.899419748783], 
[0.189226925857, 0.47485876045], 
[0.190101841833, 0.846569007797], 
[0.209864586387, 0.75584090513], 
[0.184149137132, 0.809822805743], 
[0.16719980725, 0.542168766373], 
[0.298277595149, 0.584304551447], 
[0.163634500589, 0.703424281349], 
[0.10921143366, 0.88141026673], 
[0.236682582338, 0.466328188854], 
[0.168986838436, 0.754369074504], 
[0.0874684443406, 0.635017892595], 
[0.111069303686, 0.570206949427], 
[0.135683721856, 0.707785796285], 
[0.273956917866, 0.34756832898], 
[0.202069476737, 0.526873494883], 
[0.263015059574, 0.318268461627], 
[0.208433454069, 0.384047956338], 
[0.192935711957, 0.899104680027], 
[0.274263831263, 0.806467810695], 
[0.051606400824, 0.326334769664], 
[0.0782410711647, 0.81675900692], 
[0.0748898241086, 0.529737559627], 
[0.228179296981, 0.678784103123], 
[0.0902061056999, 0.371993592694], 
[0.208680682959, 0.627061385814], 
[0.149609166663, 0.788860137802], 
[0.0508659517629, 0.479216436194], 
[0.145416969198, 0.365179775686], 
[0.120828686501, 0.511475008359], 
[0.29991292262, 0.889823354497], 
[0.07328443051, 0.453123017844], 
[0.074888422701, 0.586384985636], 
[0.0675284356892, 0.838759469864], 
[0.074689585564, 0.768128996188], 
[0.146381505181, 0.899046993255], 
[0.259227524213, 0.716958572817], 
[0.131796056745, 0.578703274801], 
[0.151479317458, 0.496120805664], 
[0.248414209857, 0.628825229932], 
[0.272532526577, 0.769579820647], 
[0.0502813698958, 0.303425485177], 
[0.0674765994388, 0.422793051751], 
[0.140152564035, 0.854275014416], 
[0.205552895346, 0.323481030587], 
[0.131669982444, 0.619587945156], 
[0.137834985502, 0.807605286086], 
[0.0581562541929, 0.876957393799], 
[0.298286459012, 0.672440425107], 
[0.12649687169, 0.687386457896], 
[0.280763820922, 0.510316052106], 
[0.224945940578, 0.602639550018], 
[0.152372380487, 0.44287068599], 
[0.227805428592, 0.711185597913], 
[0.125365067844, 0.340263687838], 
[0.1606599727, 0.586999103374], 
[0.215876729258, 0.505960549789], 
[0.147663815412, 0.674286784872], 
[0.0513587225701, 0.689871929674], 
[0.234945921616, 0.798803382506], 
[0.0870575629813, 0.855227219572], 
[0.277164682689, 0.642769258163], 
[0.266068760825, 0.479696587371], 
[0.250193649368, 0.546930707175], 
[0.24846962809, 0.332528425023], 
[0.0857221951875, 0.497585117164], 
[0.0754338277855, 0.654212234614], 
[0.157804007762, 0.381837697645], 
[0.255231410663, 0.88103682221], 
[0.280626233495, 0.598090797056], 
[0.198659742856, 0.739437446017], 
[0.179575365516, 0.594701081372], 
[0.115300088872, 0.403217339843], 
[0.169146163747, 0.401892160672], 
[0.0754651382684, 0.619837201442], 
[0.285926599468, 0.418672578278], 
[0.29070009775, 0.536679826228], 
[0.194242778138, 0.826568266901], 
[0.230938837319, 0.541914696918], 
[0.198279087454, 0.688932100678], 
[0.123254186578, 0.555529837988], 
[0.204000015885, 0.775321881974], 
[0.290351559357, 0.870558092636], 
[0.280840962255, 0.78790607382], 
[0.277121163615, 0.673257271467], 
[0.0838861358044, 0.319310353426], 
[0.214449401044, 0.567835174533], 
[0.113107588474, 0.653713349604], 
[0.156473561659, 0.882628442805], 
[0.219245529417, 0.64891549542], 
[0.0989744687448, 0.766446143606], 
[0.208107302342, 0.474261898815], 
[0.124674614274, 0.368756355564], 
[0.157661108071, 0.84727168565], 
[0.0505681688201, 0.357897184537], 
[0.141628007633, 0.597027350355], 
[0.173459367139, 0.623131840081], 
[0.264921577119, 0.402562418162], 
[0.135674426325, 0.473621460224], 
[0.231051247954, 0.58108639516], 
[0.191224778789, 0.42612119621], 
[0.122117065812, 0.818665107861], 
[0.124344034225, 0.421429820136], 
[0.161890879745, 0.300795436185], 
[0.151723520016, 0.746949684549], 
[0.0535375386959, 0.749365182244], 
[0.0647151233464, 0.636523061123], 
[0.24982249462, 0.433307846418], 
[0.262252939568, 0.369716366227], 
[0.252890894819, 0.45686524201], 
[0.211857203307, 0.834051684259], 
[0.0816673106429, 0.436531130474], 
[0.0502391781892, 0.832131399183], 
[0.0909920008578, 0.798007100307], 
[0.0872601499722, 0.677682333243], 
[0.240952873761, 0.400198785169], 
[0.170483955774, 0.482973409995], 
[0.0711178632551, 0.897502754441], 
[0.0716549999414, 0.511503871443], 
[0.0563592715917, 0.585618212766], 
[0.249449512968, 0.739592647012], 
[0.15132513037, 0.649475854984], 
[0.179863577955, 0.556025447071], 
[0.189648126969, 0.757174113606], 
[0.177671492811, 0.882879425764], 
[0.164309915045, 0.684220667549], 
[0.180112871472, 0.736551589443], 
[0.0895038123427, 0.835990863264], 
[0.197629401366, 0.507577598564], 
[0.163226218085, 0.332188368138], 
[0.20971428338, 0.434064309268], 
[0.0935554706694, 0.402220886062], 
[0.0750691051013, 0.550023622462], 
[0.0885353643394, 0.354077821716], 
[0.0735799698967, 0.785612885414], 
[0.206904064541, 0.705844216983], 
[0.261927750014, 0.684975875348], 
[0.228522812402, 0.86598893924], 
[0.298375003458, 0.319416145896], 
[0.128293481296, 0.896519555243], 
[0.160026131901, 0.828045141757], 
[0.203556676304, 0.342334180531], 
[0.125771091192, 0.304057767337], 
[0.117092579588, 0.767699383696], 
[0.253440137651, 0.578926980812], 
[0.121593109901, 0.866601879879], 
[0.124845276459, 0.669281984013], 
[0.259480044413, 0.826108623727], 
[0.192019001251, 0.373598423169], 
[0.263643287175, 0.300625013933], 
[0.17280343956, 0.420100754555], 
[0.0687096890382, 0.728183970148], 
[0.217506018266, 0.796233369734], 
[0.26723100006, 0.628438256741], 
[0.253703679705, 0.804582920999], 
[0.197352066542, 0.563363769773], 
[0.0891565059727, 0.301334151161], 
[0.218914851229, 0.311786717741], 
[0.14044058078, 0.383692545203], 
[0.266111696426, 0.441563432357], 
[0.256509268822, 0.759818291133], 
[0.166520953652, 0.79325679219], 
[0.0703957234139, 0.568241308475], 
[0.289152767458, 0.452659482114], 
[0.133908709504, 0.541217573193], 
[0.157921035196, 0.604496060267], 
[0.0509989861869, 0.622628158388], 
[0.244597643891, 0.673674786079], 
[0.249853379722, 0.52933733772], 
[0.0689062131191, 0.471047754386], 
[0.292764485997, 0.630413475414], 
[0.147027055149, 0.694442054254], 
[0.105282003738, 0.501052368805], 
[0.108610317441, 0.837971064419], 
[0.095503379449, 0.618535463101], 
[0.0781456723009, 0.694419387632], 
[0.169944285075, 0.4621923019], 
[0.221199630793, 0.349540638295], 
[0.278800565809, 0.717960290712], 
[0.287816746457, 0.567047151861], 
[0.297705603483, 0.521329597952], 
[0.0954283921492, 0.893469368943], 
[0.0503493326951, 0.46097348433], 
[0.164663646144, 0.508688772381], 
[0.298191653634, 0.384444832469], 
[0.260651839483, 0.849056466086], 
[0.19662278462, 0.881909528646], 
[0.208586007151, 0.607814184161], 
[0.265634221195, 0.51719517839], 
[0.241260348629, 0.490249096691], 
[0.260259987605, 0.89737229403], 
[0.232989236635, 0.637719389488], 
[0.172892678074, 0.640433450574], 
[0.105361932868, 0.364023899503], 
[0.114865380439, 0.437940276478], 
[0.236252066603, 0.882025251715], 
[0.236291209858, 0.449529693159], 
[0.200966684637, 0.803632933974], 
[0.23553040779, 0.729294206029], 
[0.234402851241, 0.366109901511], 
[0.0696067495363, 0.491865731399], 
[0.213970130106, 0.851096568793], 
[0.120381100672, 0.801710237703], 
[0.284510368427, 0.758026193854], 
[0.282910087208, 0.823717831412], 
[0.0741511630705, 0.865697055108], 
[0.251133173169, 0.646498153706], 
[0.276827394672, 0.880121033629], 
[0.0904936935708, 0.45117658123], 
[0.138246201439, 0.329135174411], 
[0.279064611825, 0.369681751202], 
[0.0870961097242, 0.736325540131], 
[0.175458833587, 0.71645463771], 
[0.167552871289, 0.770957349553], 
[0.258852305058, 0.562826868362], 
[0.234022877102, 0.764101737861], 
[0.268518248395, 0.611303513176], 
[0.102319457895, 0.320509696482], 
[0.151972379536, 0.536366048007], 
[0.296616778195, 0.724745456979], 
[0.198775379708, 0.398617148259], 
[0.19589257452, 0.459276793785], 
[0.182223020369, 0.515368513304], 
[0.295853586353, 0.795106218613], 
[0.225785191439, 0.40668251389], 
[0.148626621579, 0.574452028831], 
[0.138842186303, 0.635186876233], 
[0.141438047514, 0.733462663942], 
[0.129301555678, 0.755274296298], 
[0.0700413969672, 0.359589854283], 
[0.105378426009, 0.482073425493], 
[0.245801748869, 0.862764020154], 
[0.087966214953, 0.418849848546], 
[0.120046875426, 0.712659851188], 
[0.106444048209, 0.671434572139], 
[0.0568209413471, 0.520308063002], 
[0.189630926838, 0.674220803647], 
[0.0896271142129, 0.541097717006], 
[0.245070712918, 0.509328823727], 
[0.142176273508, 0.456993318888], 
[0.255720441861, 0.388941406686], 
[0.0689773176187, 0.326451034763], 
[0.215638544092, 0.689543446521], 
[0.273846266965, 0.330264405361], 
[0.050011719414, 0.392955990738], 
[0.0722524349914, 0.378570371717], 
[0.189678470273, 0.355070895634], 
[0.0506556443407, 0.712376303418], 
[0.189297548397, 0.321289658556], 
[0.105479384635, 0.604148792431], 
[0.289688363154, 0.353116981803], 
[0.18690324006, 0.868086812537], 
[0.151379746153, 0.867205789018], 
[0.0940448285286, 0.870428115861], 
[0.15335537831, 0.399910909543], 
[0.235307207371, 0.317734231529], 
[0.241666271394, 0.595393944576], 
[0.182758190452, 0.792798470283], 
[0.191010411382, 0.723913234297], 
[0.102946476873, 0.706896595939], 
[0.0589828578099, 0.795096905481], 
[0.245426611786, 0.777609127051], 
[0.280833021216, 0.856851638554], 
[0.227391773056, 0.829211256993], 
[0.226515902242, 0.436362261109], 
[0.185284897585, 0.303505915126], 
[0.280973659424, 0.550050243107], 
[0.163290867355, 0.349398019374], 
[0.178833184079, 0.691972244062], 
[0.282755904893, 0.436626586661], 
[0.217467857905, 0.740725588911], 
[0.164128544048, 0.560638857195], 
[0.0898311054054, 0.781562225652], 
[0.187972958683, 0.630956201968], 
[0.27310522081, 0.494976620001], 
[0.164978187771, 0.525434562389]]

Parallel(n_jobs=8)(delayed(process)(i, param_list) for i in range(len(param_list)))
# Parallel(n_jobs=8)(delayed(process)(i, param_list) for i in range(8))
# process(0, param_list)


